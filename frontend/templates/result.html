{% extends 'base.html' %}
{% block title %}Resultado{% endblock %}
{% block content %}
<h2 class="text-xl font-bold mb-4">ðŸ“Š Resultado de predicciÃ³n</h2>

<ul class="bg-white p-4 rounded shadow space-y-2">
  <li><strong>Teclado:</strong> {{ resultado['teclado'] }}</li>
  <li><strong>Precio ingresado:</strong> ${{ resultado['precio_usuario'] }}</li>
  <li><strong>Precio real:</strong> ${{ resultado['precio_real'] }}</li>
  <li><strong>Porcentaje:</strong> {{ resultado['porcentaje_real'] }}%</li>
  <li><strong>CategorÃ­a:</strong> <span class="font-bold text-red-600">{{ resultado['clasificacion'] }}</span></li>
</ul>

<canvas id="grafico" width="400" height="200" class="my-6"></canvas>

<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
  const precioIngresado = parseFloat("{{ resultado['precio_usuario'] }}");
  const precioReal = parseFloat("{{ resultado['precio_real'] }}");
  if (isNaN(precioIngresado) || isNaN(precioReal)) {
    console.error("Datos de precios invÃ¡lidos:", precioIngresado, precioReal);
  }

  const ctx = document.getElementById('grafico').getContext('2d');
  new Chart(ctx, {
    type: 'bar',
    data: {
      labels: ['Precio Ingresado', 'Precio Real'],
      datasets: [{
        label: 'Comparativa de Precios',
        data: [precioIngresado, precioReal],
        backgroundColor: ['#4ade80', '#f87171']
      }]
    },
    options: {
      responsive: true,
      plugins: {
        legend: { display: false }
      }
    }
  });
</script>

<a href="/" class="text-blue-600 hover:underline">ðŸ”™ Volver</a>
{% endblock %}
