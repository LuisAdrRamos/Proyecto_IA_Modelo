{% extends "base.html" %}
{% block title %}CSV{% endblock %}
{% block content %}
<h2 class="text-2xl font-bold mb-4">üìÅ Subir archivo CSV</h2>
<form method="post" enctype="multipart/form-data" class="bg-white p-6 shadow rounded mb-6">
  <input type="file" name="archivo" accept=".csv" class="border p-2 rounded" required>
  <button type="submit" class="bg-blue-600 text-white px-4 py-2 rounded ml-2 hover:bg-blue-700">Subir y predecir</button>
</form>

{% if resultados %}
<table class="w-full bg-white shadow rounded text-sm">
  <thead class="bg-gray-100">
    <tr>
      <th class="p-2">Nombre</th>
      <th class="p-2">Precio</th>
      <th class="p-2">Tipo</th>
      <th class="p-2">Conexi√≥n</th>
      <th class="p-2">Switches</th>
      <th class="p-2">Clasificaci√≥n</th>
      <th class="p-2">Precio Real</th>
    </tr>
  </thead>
  <tbody>
    {% for r in resultados %}
    <tr class="border-b">
      <td class="p-2">{{ r.Name }}</td>
      <td class="p-2">${{ r.Price }}</td>
      <td class="p-2">{{ r.Type }}</td>
      <td class="p-2">{{ r.Connection }}</td>
      <td class="p-2">{{ r.Switches }}</td>
      <td class="p-2">
        {% if r.clasificacion %}
        <span class="bg-green-100 text-green-800 px-2 py-1 rounded">{{ r.clasificacion }}</span>
        {% else %}
        <span class="bg-red-100 text-red-800 px-2 py-1 rounded">{{ r.error }}</span>
        {% endif %}
      </td>
      <td class="p-2">${{ r.precio_real_estimado if r.precio_real_estimado else 'N/A' }}</td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% endif %}
{% endblock %}
